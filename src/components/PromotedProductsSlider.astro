---
import { Carousel } from "astro-bootstrap";
import PromotedProduct from "./PromotedProduct.astro";

export type Props = {
  promotedProducts: {
    manufacturer: string;
    name: string;
    caption?: string;
    image: string;
    link: string;
  }[];
};

const { promotedProducts } = Astro.props;

const slides = promotedProducts.map((p, i) => ({
  active: i === 0,
  alt: p.name,
  img: p.image,
}));

const id = "promotedProductsCarousel";
---

<Carousel {id} fade dark>
  <Carousel.Indicators {id} {slides} />
  <Carousel.Inner>
    { promotedProducts.map((product, idx) => {
        return <Carousel.Item active={idx === 0}>
          <PromotedProduct
            manufacturer={product.manufacturer}
            name={product.name}
            caption={product.caption}
            image={product.image}
            link={product.link}
            layout={'portrait'}
          />
        </Carousel.Item>
      })
    }
  </Carousel.Inner>
  <Carousel.Controls {id} />
</Carousel>
