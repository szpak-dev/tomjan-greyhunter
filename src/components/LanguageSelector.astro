---
import { languages } from "../i18n/ui";
import { getLangFromUrl, getLocalizedUrl } from "../i18n/utils";

const currentLang = getLangFromUrl(Astro.url);
const currentPath = Astro.url.pathname.split('/').slice(2).join('/');
---

<div class="dropdown d-inline-block ms-3">
  <button
    class="btn btn-outline-secondary dropdown-toggle btn-sm"
    type="button"
    data-bs-toggle="dropdown"
    aria-expanded="false"
  >
    {currentLang === "pl" ? "ğŸ‡µğŸ‡±" : "ğŸ‡¬ğŸ‡§"}
  </button>
  <ul class="dropdown-menu">
    {
      Object.entries(languages).map(([l, label]) => (
        <li>
          <a class="dropdown-item" href={getLocalizedUrl(l, currentPath)}>
            {l === "pl" ? "ğŸ‡µğŸ‡±" : "ğŸ‡¬ğŸ‡§"}
            {label}
          </a>
        </li>
      ))
    }
  </ul>
</div>
