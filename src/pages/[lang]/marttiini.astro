---
import { getRelativeLocaleUrl } from "astro:i18n";
import Layout from "../../layouts/Layout.astro";
import CategoriesGrid from "../../components/CategoriesGrid.astro";
import { languages } from "../../i18n/ui";
import { getMarttiiniCategoriesWithImages } from "../../loaders/marttiini/marttiini";
import { useTranslations } from "../../i18n/utils";

const lang = Astro.currentLocale as string;
const t = useTranslations(lang as 'en' | 'pl');

// Fetch all Marttiini categories with images
const categories = await getMarttiiniCategoriesWithImages(lang as 'en' | 'pl');

export async function getStaticPaths() {
  return Object.keys(languages).map((lang) => ({ params: { lang } }));
}
---

<Layout title={t('marttiini.categories')}>
  <CategoriesGrid categories={categories} lang={lang} />
</Layout>
