---
import Layout from "../../layouts/Layout.astro";
import CategoriesGrid from "../../components/CategoriesGrid.astro";

import { categoryRepository } from "../../content";
import { languages } from "../../i18n/ui";
import { useTranslations } from "../../i18n/utils";

const lang = Astro.currentLocale as string;
const t = useTranslations(lang as 'en' | 'pl');

const categories = await categoryRepository.findCategoriesWithImages("marttiini", lang);

export async function getStaticPaths() {
  return Object.keys(languages).map((lang) => ({ params: { lang } }));
}
---

<Layout title={t('marttiini.categories')}>
  <CategoriesGrid 
    categories={categories} 
    lang={lang} 
  />
</Layout>
