---
import Layout from "../../../layouts/Layout.astro";
import ProductsGrid from "../../../components/ProductsGrid.astro";

import { categoryRepository, productRepository } from "../../../content";
import { languages } from "../../../i18n/ui";
const { lang, category } = Astro.params;

const products = await productRepository.findProductsByCategory("marttiini", category, lang as string);

export async function getStaticPaths() {
  const paths = [];

  for (const lang of Object.keys(languages)) {
    const categories = await categoryRepository.findCategoriesWithImages("marttiini", lang as "en" | "pl" );

    for (const category of categories) {
      paths.push({
        params: {
          lang,
          category: category.slug,
        },
      });
    }
  }

  return paths;
}

const pageTitle = `${category} - Marttiini`;
---

<Layout title={pageTitle}>
    <ProductsGrid
      products={products}
      lang={lang as string}
      categoryName={category}
  />
</Layout>

<style>
  .breadcrumb {
    background: transparent;
    padding: 0;
    margin-bottom: 1rem;
  }

  .breadcrumb-item + .breadcrumb-item::before {
    content: "â€º";
    color: #6c757d;
  }

  .breadcrumb-item a {
    color: #0d6efd;
    text-decoration: none;
  }

  .breadcrumb-item a:hover {
    text-decoration: underline;
  }

  .breadcrumb-item.active {
    color: #6c757d;
  }
</style>
