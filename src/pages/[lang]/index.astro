---
import { siteRepository, manufacturerRepository, productRepository } from "../../content";
import type { MossaicPicture } from "../../content/site.repository";
import FrontPage from "../../layouts/FrontPage.astro";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
  return siteRepository.getAvailableLanguages().map((lang) => ({ params: { lang: lang.code } }));
}

const { lang } = Astro.params;
const sliderItems = siteRepository.getSliderItems("marttiini");
const manufacturers = await manufacturerRepository.findAll(lang);
const newProducts = await productRepository.findNewProducts("marttiini", lang);
const mossaicImages: MossaicPicture[] = siteRepository.getMossaic();
---

<Layout title="Grey Hunter - Tomasz Jantos" lang={lang}>
  <FrontPage 
    {lang}
    {sliderItems}
    {manufacturers}
    {newProducts}
    {mossaicImages}
  />
</Layout>